<!DOCTYPE html>
<!-- This is based on DillingerLee's great template here:
https://github.com/Team-Code/KA_Offline -->
<html> 
 <head>
    <title>Addition 1</title> 
</head>
 <body>
    <p align="center"> 
	<!--This draws the Canvas on the webpage -->
      <canvas id="mycanvas"></canvas> 
    </p>
 </body>
 
 <!-- Run all the JavaScript stuff -->
 <!-- Include the processing.js library -->
 <!-- See https://khanacademy.zendesk.com/hc/en-us/articles/202260404-What-parts-of-ProcessingJS-does-Khan-Academy-support- for differences -->
 <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
 
 <script>
    var sketchProc = function(processingInstance) {
     with (processingInstance) {
        size(400, 400); 
        frameRate(30);
        
        // ProgramCodeGoesHere
	
	     // buttons

var Button = function(x, y, pressed) {
    this.x = x;
    this.y = y;
    this.pressed = pressed;
};

Button.prototype.draw = function() {
    if(this.pressed) {
        fill(74, 95, 179);
    } else {
        fill(255, 255, 255);
    }
    strokeWeight(2);
    ellipse(this.x, this.y, 40, 40);
};

Button.prototype.isUnderMouse = function(x, y) {
    return (sq(x - this.x) + sq(y - this.y)) < sq(20);
};

var Resultbutton = function(x, y, pressed) {
    this.x = x;
    this.y = y;
    this.pressed = pressed;
};

Resultbutton.prototype.draw = function() {
    if(this.pressed) {
        fill(74, 95, 179);
    } else {
        fill(255, 255, 255);
    }
    strokeWeight(2);
    rect(this.x, this.y, 40, 40, 10);
};

var COLUMN_HEIGHT = 5;
var NUMBER_COLUMNS = 2;
var buttons = [];
var resultbuttons = [];

for(var j=0; j < NUMBER_COLUMNS; j++) {
    for(var i=0; i < COLUMN_HEIGHT; i++) {
        buttons.push(new Button(50 + j * 100, 150 + i * 50, false));
        resultbuttons.push(new Resultbutton(240 + j * 50, 330 - i * 50, false));
    }
}

var sum = 0;

mouseClicked = function() {
    sum = 0;
    for (var i = 0; i < buttons.length; i++) {
        if (buttons[i].isUnderMouse(mouseX, mouseY)) {
            if (buttons[i].pressed) {
                buttons[i].pressed = false;
            } else {
                buttons[i].pressed = true;
            }
        }
        // Counting pressed buttons
        if(buttons[i].pressed) {
            sum++;
        }
        
    }
};

draw = function() {
    background(255, 255, 255);
    
    // 
    for(var i=0; i < resultbuttons.length; i++) {
        resultbuttons[i].pressed = false;
    }
    
    // Colouring of resultbuttons
    for(var i=0; i < sum; i++) {
        resultbuttons[i].pressed = true;
    }
    
    // Draw all buttons
    for(var i=0; i < buttons.length; i++) {
        buttons[i].draw();
        resultbuttons[i].draw();
    }
    
    fill(0, 0, 0);
    textSize(50);
    text(sum, 270, 100);
    text("+", 87, 270);
    text("=", 187, 270);
};
	     
        /*fill(255, 255, 0);
        ellipse(200, 200, 200, 200);
        noFill();
        stroke(0, 0, 0);
        strokeWeight(2);
        arc(200, 200, 150, 100, 0, PI);
        fill(0, 0, 0);
        ellipse(250, 200, 10, 10);
        ellipse(153, 200, 10, 10);*/
    }};

    // Get the canvas that Processing-js will use
    var canvas = document.getElementById("mycanvas"); 
    // Pass the function sketchProc (defined in myCode.js) to Processing's constructor.
    var processingInstance = new Processing(canvas, sketchProc); 
 </script>

</html>
